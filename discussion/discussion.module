<?php

/**
 * Implementation of hook_menu
 */
function discussion_menu() {
  $items['discussion-with/%user'] = array(
    'page callback' => 'discussion_page',
    'page arguments' => array(1),
    'access callback' => 'discussion_access',
    'access arguments' => array(1),
    'type' => MENU_LOCAL_TASK,
    );
  return $items;
}

function discussion_page($other) {
  include_once drupal_get_path('module', 'strophe') .'/strophe.inc';
  global $user;
  return theme('discussion_room', new strophe_chat($user), new strophe_user($other));
}

/**
 * Implementation of hook_theme
 */
function discussion_theme() {
  $path = drupal_get_path('module', 'discussion');
  return array(
    'discussion_room' => array(
      'path' => "$path/theme",
      'template' => 'discussion_room',
      'arguments' => array('chatroom' => NULL, 'other' => NULL)),
  );
  
}

function discussion_access($arg) {
  return TRUE;
}